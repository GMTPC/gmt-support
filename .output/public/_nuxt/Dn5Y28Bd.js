import{Q as $,r as g,S as z,o as u,h as x,a as o,w as t,b as i,u as d,f as l,t as p,d as c,c as _,F as I,j as R,O as T,V,g as y,_ as L}from"./BX3DXnrd.js";import{_ as B}from"./BJp3ErZP.js";import{u as j,V as N,M as q}from"./Bf51ydsQ.js";import{a as C,V as M}from"./Dcv5vhZ4.js";import{V as O,c as Q,a as U}from"./CEv2fZCT.js";import{V as Y}from"./DDt4p3us.js";import{V as A}from"./kQPmhJOm.js";import{a as G,b as H,c as J,V as K}from"./8gBy0bTw.js";import{V as k}from"./C5ymIkpE.js";import{V as W}from"./BrBP5ZB7.js";import"./-1Oo1DPM.js";import"./CZXLAAch.js";import"./BudtlS_C.js";import"./DWGaNmQL.js";import"./FFw7bxMS.js";import"./DEKsWHAV.js";import"./DvB9e70b.js";/* empty css        */import"./Blmqt2wm.js";import"./DSgduqRd.js";import"./1Ywhgt5G.js";import"./B2HVLM-N.js";import"./BFwkMqJ3.js";import"./DScwcNyu.js";const X={class:"d-flex justify-space-between align-center"},Z={key:0,class:"text-center text-medium-emphasis py-8"},ee={class:"d-flex gap-1"},te=$({__name:"purchase-request",setup(oe){const a=j(),v=g(),m=g({show:!1,message:"",color:"success"}),n=(r,e="success")=>{m.value={show:!0,message:r,color:e}},w=r=>{if(!r)return"";const e=new Date(r),s=e.getDate(),f=e.getMonth()+1,S=e.getFullYear()+543;return`${s}/${f}/${S}`},b=()=>{try{const r=a.saveMemo();n("บันทึกสำเร็จ!","success")}catch(r){console.error("Error saving memo:",r),n("เกิดข้อผิดพลาดในการบันทึก","error")}},E=async()=>{var r;try{await((r=v.value)==null?void 0:r.exportToPdf()),n("Export PDF สำเร็จ!","success")}catch(e){console.error("Error exporting PDF:",e),n("เกิดข้อผิดพลาดในการ Export PDF","error")}},h=()=>{confirm("คุณต้องการรีเซ็ตฟอร์มหรือไม่?")&&(a.resetCurrentMemo(),n("รีเซ็ตฟอร์มแล้ว","info"))},D=r=>{a.loadMemo(r),n("โหลดบันทึกแล้ว","info")},P=async r=>{var e;try{const s=a.currentMemo.id;a.loadMemo(r),await((e=v.value)==null?void 0:e.exportToPdf()),s!==r&&s&&a.loadMemo(s),n("Export PDF สำเร็จ!","success")}catch(s){console.error("Error exporting memo:",s),n("เกิดข้อผิดพลาดในการ Export PDF","error")}},F=r=>{confirm("คุณต้องการลบบันทึกนี้หรือไม่?")&&(a.deleteMemo(r),a.currentMemo.id===r&&a.resetCurrentMemo(),n("ลบบันทึกแล้ว","warning"))};return z(()=>{a.loadFromStorage()}),(r,e)=>(u(),x("div",null,[o(N,{fluid:""},{default:t(()=>[o(C,null,{default:t(()=>[o(M,{cols:"12"},{default:t(()=>[...e[2]||(e[2]=[i("div",{class:"d-flex justify-space-between align-center mb-4"},[i("div",null,[i("h1",{class:"text-h4 font-weight-bold"}," ใบขอซื้อ (Purchase Request Memo) "),i("p",{class:"text-subtitle-1 text-medium-emphasis"}," สร้างและจัดการใบขอซื้อของคุณ ")])],-1)])]),_:1})]),_:1}),o(C,null,{default:t(()=>[o(M,{cols:"12",lg:"8"},{default:t(()=>[o(B,{memo:d(a).currentMemo,"is-saved":!!d(a).currentMemo.id,onSave:b,onExportPdf:E,onReset:h},null,8,["memo","is-saved"])]),_:1}),o(M,{cols:"12",lg:"4"},{default:t(()=>[o(O,null,{default:t(()=>[o(Q,null,{default:t(()=>[i("div",X,[e[3]||(e[3]=i("span",null,"บันทึกที่บันทึกไว้",-1)),o(Y,{color:"primary",size:"small"},{default:t(()=>[l(p(d(a).savedMemos.length),1)]),_:1})])]),_:1}),o(A),o(U,null,{default:t(()=>[d(a).savedMemos.length===0?(u(),x("div",Z,[o(c,{size:"48",color:"grey-lighten-1"},{default:t(()=>[...e[4]||(e[4]=[l(" mdi-file-document-outline ",-1)])]),_:1}),e[5]||(e[5]=i("p",{class:"mt-2"}," ยังไม่มีบันทึกที่บันทึกไว้ ",-1))])):(u(),_(K,{key:1,density:"compact"},{default:t(()=>[(u(!0),x(I,null,R(d(a).savedMemos,s=>(u(),_(G,{key:s.id,class:T({"bg-primary-lighten-5":s.id===d(a).currentMemo.id}),onClick:f=>D(s.id)},{prepend:t(()=>[o(c,{color:"primary"},{default:t(()=>[...e[6]||(e[6]=[l(" mdi-file-document ",-1)])]),_:1})]),append:t(()=>[i("div",ee,[o(V,{icon:"",size:"small",variant:"text",onClick:y(f=>P(s.id),["stop"])},{default:t(()=>[o(c,{size:"20"},{default:t(()=>[...e[7]||(e[7]=[l(" mdi-file-pdf-box ",-1)])]),_:1}),o(k,{activator:"parent",location:"top"},{default:t(()=>[...e[8]||(e[8]=[l(" Export PDF ",-1)])]),_:1})]),_:1},8,["onClick"]),o(V,{icon:"",size:"small",variant:"text",color:"error",onClick:y(f=>F(s.id),["stop"])},{default:t(()=>[o(c,{size:"20"},{default:t(()=>[...e[9]||(e[9]=[l(" mdi-delete ",-1)])]),_:1}),o(k,{activator:"parent",location:"top"},{default:t(()=>[...e[10]||(e[10]=[l(" ลบ ",-1)])]),_:1})]),_:1},8,["onClick"])])]),default:t(()=>[o(H,null,{default:t(()=>[l(p(s.subject||"ไม่มีหัวข้อ"),1)]),_:2},1024),o(J,null,{default:t(()=>[l(p(w(s.date))+" - "+p(s.documentNumber||"ไม่มีเลขที่"),1)]),_:2},1024)]),_:2},1032,["class","onClick"]))),128))]),_:1}))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),o(q,{ref_key:"pdfExportRef",ref:v,memo:d(a).currentMemo},null,8,["memo"]),o(W,{modelValue:m.value.show,"onUpdate:modelValue":e[1]||(e[1]=s=>m.value.show=s),color:m.value.color,timeout:3e3},{actions:t(()=>[o(V,{variant:"text",onClick:e[0]||(e[0]=s=>m.value.show=!1)},{default:t(()=>[...e[11]||(e[11]=[l(" ปิด ",-1)])]),_:1})]),default:t(()=>[l(p(m.value.message)+" ",1)]),_:1},8,["modelValue","color"])]))}}),he=L(te,[["__scopeId","data-v-9249c969"]]);export{he as default};
