import{_ as g}from"./D1NlPZts.js";import{Q as M,r as f,S as E,o as k,h as S,a as o,w as r,b as m,V as d,u,aL as c,d as C,f as l,t as h}from"./BX3DXnrd.js";import{_ as P}from"./BJp3ErZP.js";import{u as y,V as T,M as B}from"./Bf51ydsQ.js";import{a as v,V as x}from"./Dcv5vhZ4.js";import{V as R}from"./BrBP5ZB7.js";import"./CRzN-RqF.js";import"./-1Oo1DPM.js";import"./CZXLAAch.js";import"./BudtlS_C.js";import"./DWGaNmQL.js";import"./FFw7bxMS.js";import"./DEKsWHAV.js";import"./DvB9e70b.js";import"./CEv2fZCT.js";import"./DSgduqRd.js";/* empty css        */import"./Blmqt2wm.js";import"./BFwkMqJ3.js";import"./DScwcNyu.js";const D={class:"d-flex justify-space-between align-center mb-4"},oe=M({__name:"create",setup(F){const s=y(),p=f(),a=f({show:!1,message:"",color:"success"}),n=(t,e="success")=>{a.value={show:!0,message:t,color:e}},V=()=>{try{const t=s.saveMemo();n("บันทึกสำเร็จ!","success"),setTimeout(()=>{c(`/memo/${t}`)},1e3)}catch(t){console.error("Error saving memo:",t),n("เกิดข้อผิดพลาดในการบันทึก","error")}},w=async()=>{var t;try{s.currentMemo.id||s.saveMemo(),await((t=p.value)==null?void 0:t.exportToPdf()),n("Export PDF สำเร็จ!","success")}catch(e){console.error("Error exporting PDF:",e),n("เกิดข้อผิดพลาดในการ Export PDF","error")}},_=()=>{confirm("คุณต้องการรีเซ็ตฟอร์มหรือไม่?")&&(s.resetCurrentMemo(),n("รีเซ็ตฟอร์มแล้ว","info"))};return E(()=>{s.resetCurrentMemo(),s.loadFromStorage()}),(t,e)=>{const b=g;return k(),S("div",null,[o(T,{fluid:""},{default:r(()=>[o(b,{items:[{text:"ใบขอซื้อ",to:"/memo",icon:"bx-file"},{text:"สร้างใหม่",icon:"bx-plus"}],"show-home":!0}),o(v,null,{default:r(()=>[o(x,{cols:"12"},{default:r(()=>[m("div",D,[e[5]||(e[5]=m("div",null,[m("h1",{class:"text-h4 font-weight-bold"}," สร้างใบขอซื้อใหม่ "),m("p",{class:"text-subtitle-1 text-medium-emphasis"}," กรอกข้อมูลเพื่อสร้างใบขอซื้อ ")],-1)),o(d,{variant:"outlined",onClick:e[0]||(e[0]=i=>("navigateTo"in t?t.navigateTo:u(c))("/memo"))},{default:r(()=>[o(C,{start:""},{default:r(()=>[...e[3]||(e[3]=[l(" bx-arrow-back ",-1)])]),_:1}),e[4]||(e[4]=l(" กลับ ",-1))]),_:1})])]),_:1})]),_:1}),o(v,null,{default:r(()=>[o(x,{cols:"12"},{default:r(()=>[o(P,{memo:u(s).currentMemo,"is-saved":!1,onSave:V,onExportPdf:w,onReset:_},null,8,["memo"])]),_:1})]),_:1})]),_:1}),o(B,{ref_key:"pdfExportRef",ref:p,memo:u(s).currentMemo},null,8,["memo"]),o(R,{modelValue:a.value.show,"onUpdate:modelValue":e[2]||(e[2]=i=>a.value.show=i),color:a.value.color,timeout:3e3},{actions:r(()=>[o(d,{variant:"text",onClick:e[1]||(e[1]=i=>a.value.show=!1)},{default:r(()=>[...e[6]||(e[6]=[l(" ปิด ",-1)])]),_:1})]),default:r(()=>[l(h(a.value.message)+" ",1)]),_:1},8,["modelValue","color"])])}}});export{oe as default};
