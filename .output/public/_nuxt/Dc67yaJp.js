import{m as U,a as k,V as D}from"./BFwkMqJ3.js";import{a as x,d as H,s as T,b as K,g as q,n as N,f as X}from"./DWGaNmQL.js";import{v as I,a as A,H as V,bO as C,p as $,a3 as j,z,a7 as W,E as Y,A as L,r as G,ab as Q,D as Z,a9 as J,bP as _,U as ee,bc as te,Z as ne,b3 as R,X as ae,b2 as S,G as oe,aH as se,bQ as ie,bR as P}from"./BX3DXnrd.js";import{a as re}from"./DScwcNyu.js";const le=$({target:[Object,Array]},"v-dialog-transition"),ue=I()({name:"VDialogTransition",props:le(),setup(t,m){let{slots:a}=m;const o={onBeforeEnter(s){s.style.pointerEvents="none",s.style.visibility="hidden"},async onEnter(s,v){var g;await new Promise(u=>requestAnimationFrame(u)),await new Promise(u=>requestAnimationFrame(u)),s.style.visibility="";const{x:c,y:f,sx:i,sy:n,speed:l}=O(t.target,s),h=x(s,[{transform:`translate(${c}px, ${f}px) scale(${i}, ${n})`,opacity:0},{}],{duration:225*l,easing:H});(g=M(s))==null||g.forEach(u=>{x(u,[{opacity:0},{opacity:0,offset:.33},{}],{duration:225*2*l,easing:T})}),h.finished.then(()=>v())},onAfterEnter(s){s.style.removeProperty("pointer-events")},onBeforeLeave(s){s.style.pointerEvents="none"},async onLeave(s,v){var g;await new Promise(u=>requestAnimationFrame(u));const{x:c,y:f,sx:i,sy:n,speed:l}=O(t.target,s);x(s,[{},{transform:`translate(${c}px, ${f}px) scale(${i}, ${n})`,opacity:0}],{duration:125*l,easing:K}).finished.then(()=>v()),(g=M(s))==null||g.forEach(u=>{x(u,[{},{opacity:0,offset:.2},{opacity:0}],{duration:125*2*l,easing:T})})},onAfterLeave(s){s.style.removeProperty("pointer-events")}};return()=>t.target?A(C,V({name:"dialog-transition"},o,{css:!1}),a):A(C,{name:"dialog-transition"},a)}});function M(t){var a;const m=(a=t.querySelector(":scope > .v-card, :scope > .v-sheet, :scope > .v-list"))==null?void 0:a.children;return m&&[...m]}function O(t,m){const a=q(t),o=N(m),[s,v]=getComputedStyle(m).transformOrigin.split(" ").map(r=>parseFloat(r)),[c,f]=getComputedStyle(m).getPropertyValue("--v-overlay-anchor-origin").split(" ");let i=a.left+a.width/2;c==="left"||f==="left"?i-=a.width/2:(c==="right"||f==="right")&&(i+=a.width/2);let n=a.top+a.height/2;c==="top"||f==="top"?n-=a.height/2:(c==="bottom"||f==="bottom")&&(n+=a.height/2);const l=a.width/o.width,h=a.height/o.height,g=Math.max(1,l,h),u=l/g||0,E=h/g||0,b=o.width*o.height/(window.innerWidth*window.innerHeight),e=b>.12?Math.min(1.5,(b-.12)*10+1):1;return{x:i-(s+o.left),y:n-(v+o.top),sx:u,sy:E,speed:e}}const ce=$({id:String,submenu:Boolean,...j(U({closeDelay:250,closeOnContentClick:!0,locationStrategy:"connected",location:void 0,openDelay:300,scrim:!1,scrollStrategy:"reposition",transition:{component:ue}}),["absolute"])},"VMenu"),ge=I()({name:"VMenu",props:ce(),emits:{"update:modelValue":t=>!0},setup(t,m){let{slots:a}=m;const o=z(t,"modelValue"),{scopeId:s}=re(),{isRtl:v}=W(),c=Y(),f=L(()=>t.id||`v-menu-${c}`),i=G(),n=Q(k,null),l=Z(new Set);J(k,{register(){l.value.add(c)},unregister(){l.value.delete(c)},closeParents(e){setTimeout(()=>{var r;!l.value.size&&!t.persistent&&(e==null||(r=i.value)!=null&&r.contentEl&&!_(e,i.value.contentEl))&&(o.value=!1,n==null||n.closeParents())},40)}}),ee(()=>{n==null||n.unregister(),document.removeEventListener("focusin",h)}),te(()=>o.value=!1);async function h(e){var y,p,w;const r=e.relatedTarget,d=e.target;await ne(),o.value&&r!==d&&((y=i.value)!=null&&y.contentEl)&&((p=i.value)!=null&&p.globalTop)&&![document,i.value.contentEl].includes(d)&&!i.value.contentEl.contains(d)&&((w=R(i.value.contentEl)[0])==null||w.focus())}ae(o,e=>{e?(n==null||n.register(),S&&document.addEventListener("focusin",h,{once:!0})):(n==null||n.unregister(),S&&document.removeEventListener("focusin",h))},{immediate:!0});function g(e){n==null||n.closeParents(e)}function u(e){var r,d,y,p,w;if(!t.disabled)if(e.key==="Tab"||e.key==="Enter"&&!t.closeOnContentClick){if(e.key==="Enter"&&(e.target instanceof HTMLTextAreaElement||e.target instanceof HTMLInputElement&&e.target.closest("form")))return;e.key==="Enter"&&e.preventDefault(),ie(R((r=i.value)==null?void 0:r.contentEl,!1),e.shiftKey?"prev":"next",F=>F.tabIndex>=0)||(o.value=!1,(y=(d=i.value)==null?void 0:d.activatorEl)==null||y.focus())}else t.submenu&&e.key===(v.value?"ArrowRight":"ArrowLeft")&&(o.value=!1,(w=(p=i.value)==null?void 0:p.activatorEl)==null||w.focus())}function E(e){var d;if(t.disabled)return;const r=(d=i.value)==null?void 0:d.contentEl;r&&o.value?e.key==="ArrowDown"?(e.preventDefault(),e.stopImmediatePropagation(),P(r,"next")):e.key==="ArrowUp"?(e.preventDefault(),e.stopImmediatePropagation(),P(r,"prev")):t.submenu&&(e.key===(v.value?"ArrowRight":"ArrowLeft")?o.value=!1:e.key===(v.value?"ArrowLeft":"ArrowRight")&&(e.preventDefault(),P(r,"first"))):(t.submenu?e.key===(v.value?"ArrowLeft":"ArrowRight"):["ArrowDown","ArrowUp"].includes(e.key))&&(o.value=!0,e.preventDefault(),setTimeout(()=>setTimeout(()=>E(e))))}const b=L(()=>V({"aria-haspopup":"menu","aria-expanded":String(o.value),"aria-owns":f.value,onKeydown:E},t.activatorProps));return oe(()=>{const e=D.filterProps(t);return A(D,V({ref:i,id:f.value,class:["v-menu",t.class],style:t.style},e,{modelValue:o.value,"onUpdate:modelValue":r=>o.value=r,absolute:!0,activatorProps:b.value,location:t.location??(t.submenu?"end":"bottom"),"onClick:outside":g,onKeydown:u},s),{activator:a.activator,default:function(){for(var r=arguments.length,d=new Array(r),y=0;y<r;y++)d[y]=arguments[y];return A(se,{root:"VMenu"},{default:()=>{var p;return[(p=a.default)==null?void 0:p.call(a,...d)]}})}})}),X({id:f,Î¨openChildren:l},i)}});export{ge as V,ue as a};
