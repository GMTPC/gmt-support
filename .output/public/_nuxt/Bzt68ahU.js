import{_ as N}from"./D1NlPZts.js";import{Q as j,aK as I,r as V,A as D,S as K,aL as P,o as n,h as g,a as s,w as e,b as o,t as u,u as i,c as m,d as M,f as a,V as y,M as d}from"./BX3DXnrd.js";import{_ as h}from"./BJp3ErZP.js";import{u as q,V as L,M as Q}from"./Bf51ydsQ.js";import{a as b,V as f}from"./Dcv5vhZ4.js";import{V as U,a as Y}from"./CEv2fZCT.js";import{V as C}from"./kQPmhJOm.js";import{V as p}from"./DDt4p3us.js";import{V as G}from"./BrBP5ZB7.js";import"./CRzN-RqF.js";import"./-1Oo1DPM.js";import"./CZXLAAch.js";import"./BudtlS_C.js";import"./DWGaNmQL.js";import"./FFw7bxMS.js";import"./DEKsWHAV.js";import"./DvB9e70b.js";/* empty css        */import"./Blmqt2wm.js";import"./DSgduqRd.js";import"./1Ywhgt5G.js";import"./BFwkMqJ3.js";import"./DScwcNyu.js";const H={class:"d-flex justify-space-between align-center mb-4"},J={class:"text-h4 font-weight-bold"},O={class:"text-subtitle-1 text-medium-emphasis"},W={class:"d-flex gap-2"},X={class:"mb-4"},Z={class:"text-body-1"},tt={class:"mb-4"},et={class:"text-body-1"},ot={class:"mb-4"},st={class:"text-body-1"},rt={class:"mb-4"},lt={class:"text-body-1"},it={class:"mb-4"},at={class:"text-body-1"},nt={class:"mb-4"},mt={class:"d-flex flex-wrap gap-2"},dt={key:4,class:"text-medium-emphasis"},ut={class:"mb-4"},pt={class:"d-flex flex-wrap gap-2"},ft={key:8,class:"text-medium-emphasis"},ct={class:"mb-4"},vt={class:"text-body-1"},xt={class:"mb-4"},_t={class:"text-body-1"},yt={class:"mb-4"},bt={class:"text-body-1",style:{"white-space":"pre-wrap"}},Mt={class:"d-flex gap-2"},Ut=j({__name:"[id]",setup(kt){const k=I(),r=q(),z=V(),c=V(!1),v=V({show:!1,message:"",color:"success"}),R=D(()=>{const l=r.currentMemo.purposes;return l.consider||l.know||l.issueCommand||l.continue}),T=D(()=>{const l=r.currentMemo.actions;return l.follow||l.considerReturn||l.copyStores||l.returnCopies||l.forApproval||l.toConsider||l.toKnow||l.other}),A=l=>{if(!l)return"";const t=new Date(l),w=t.getDate(),_=t.getMonth()+1,$=t.getFullYear()+543;return`${w}/${_}/${$}`},x=(l,t="success")=>{v.value={show:!0,message:l,color:t}},E=()=>{c.value=!c.value},F=()=>{try{r.saveMemo(),x("บันทึกสำเร็จ!","success"),c.value=!0}catch(l){console.error("Error saving memo:",l),x("เกิดข้อผิดพลาดในการบันทึก","error")}},S=async()=>{var l;try{await((l=z.value)==null?void 0:l.exportToPdf()),x("Export PDF สำเร็จ!","success")}catch(t){console.error("Error exporting PDF:",t),x("เกิดข้อผิดพลาดในการ Export PDF","error")}},B=()=>{if(confirm("คุณต้องการยกเลิกการแก้ไขหรือไม่?")){const l=String(k.params.id);r.loadMemo(l),x("ยกเลิกการแก้ไขแล้ว","info")}};return K(()=>{const l=String(k.params.id);r.loadFromStorage(),r.loadMemo(l),k.query.mode==="view"&&(c.value=!0),r.currentMemo.id||(x("ไม่พบใบขอซื้อ","error"),setTimeout(()=>{P("/memo")},1e3))}),(l,t)=>{const w=N;return n(),g("div",null,[s(L,{fluid:""},{default:e(()=>[s(w,{items:[{text:"ใบขอซื้อ",to:"/memo",icon:"bx-file"},{text:c.value?"ดูใบขอซื้อ":"แก้ไขใบขอซื้อ",icon:c.value?"bx-show":"bx-edit"}],"show-home":!0},null,8,["items"]),s(b,null,{default:e(()=>[s(f,{cols:"12"},{default:e(()=>[o("div",H,[o("div",null,[o("h1",J,u(c.value?"ดูใบขอซื้อ":"แก้ไขใบขอซื้อ"),1),o("p",O,u(i(r).currentMemo.subject||"ไม่มีหัวข้อ"),1)]),o("div",W,[c.value?(n(),m(y,{key:0,color:"primary",onClick:E},{default:e(()=>[s(M,{start:""},{default:e(()=>[...t[3]||(t[3]=[a(" bx-edit ",-1)])]),_:1}),t[4]||(t[4]=a(" แก้ไข ",-1))]),_:1})):d("",!0),s(y,{variant:"outlined",onClick:t[0]||(t[0]=_=>("navigateTo"in l?l.navigateTo:i(P))("/memo"))},{default:e(()=>[s(M,{start:""},{default:e(()=>[...t[5]||(t[5]=[a(" bx-arrow-back ",-1)])]),_:1}),t[6]||(t[6]=a(" กลับ ",-1))]),_:1})])])]),_:1})]),_:1}),c.value?(n(),m(b,{key:0},{default:e(()=>[s(f,{cols:"12"},{default:e(()=>[s(U,null,{default:e(()=>[s(Y,null,{default:e(()=>[s(b,null,{default:e(()=>[s(f,{cols:"12",md:"6"},{default:e(()=>[o("div",X,[t[7]||(t[7]=o("div",{class:"text-caption text-medium-emphasis"},"จาก (From)",-1)),o("div",Z,u(i(r).currentMemo.from||"-"),1)])]),_:1}),s(f,{cols:"12",md:"6"},{default:e(()=>[o("div",tt,[t[8]||(t[8]=o("div",{class:"text-caption text-medium-emphasis"},"ถึง (To)",-1)),o("div",et,u(i(r).currentMemo.to||"-"),1)])]),_:1}),s(f,{cols:"12",md:"6"},{default:e(()=>[o("div",ot,[t[9]||(t[9]=o("div",{class:"text-caption text-medium-emphasis"},"สำเนา (CC)",-1)),o("div",st,u(i(r).currentMemo.cc||"-"),1)])]),_:1}),s(f,{cols:"12",md:"3"},{default:e(()=>[o("div",rt,[t[10]||(t[10]=o("div",{class:"text-caption text-medium-emphasis"},"วันที่",-1)),o("div",lt,u(A(i(r).currentMemo.date)),1)])]),_:1}),s(f,{cols:"12",md:"3"},{default:e(()=>[o("div",it,[t[11]||(t[11]=o("div",{class:"text-caption text-medium-emphasis"},"เลขที่เอกสาร",-1)),o("div",at,u(i(r).currentMemo.documentNumber||"-"),1)])]),_:1})]),_:1}),s(C,{class:"my-4"}),o("div",nt,[t[16]||(t[16]=o("div",{class:"text-subtitle-2 mb-2"},"วัตถุประสงค์:",-1)),o("div",mt,[i(r).currentMemo.purposes.consider?(n(),m(p,{key:0,color:"primary",size:"small"},{default:e(()=>[...t[12]||(t[12]=[a(" เพื่อพิจารณา ",-1)])]),_:1})):d("",!0),i(r).currentMemo.purposes.know?(n(),m(p,{key:1,color:"info",size:"small"},{default:e(()=>[...t[13]||(t[13]=[a(" เพื่อทราบ ",-1)])]),_:1})):d("",!0),i(r).currentMemo.purposes.issueCommand?(n(),m(p,{key:2,color:"warning",size:"small"},{default:e(()=>[...t[14]||(t[14]=[a(" เพื่อออกคำสั่ง ",-1)])]),_:1})):d("",!0),i(r).currentMemo.purposes.continue?(n(),m(p,{key:3,color:"success",size:"small"},{default:e(()=>[...t[15]||(t[15]=[a(" เพื่อดำเนินการ ",-1)])]),_:1})):d("",!0),R.value?d("",!0):(n(),g("span",dt,"-"))])]),o("div",ut,[t[24]||(t[24]=o("div",{class:"text-subtitle-2 mb-2"},"การดำเนินการ:",-1)),o("div",pt,[i(r).currentMemo.actions.follow?(n(),m(p,{key:0,size:"small"},{default:e(()=>[...t[17]||(t[17]=[a("ปฏิบัติตาม",-1)])]),_:1})):d("",!0),i(r).currentMemo.actions.considerReturn?(n(),m(p,{key:1,size:"small"},{default:e(()=>[...t[18]||(t[18]=[a(" พิจารณาแล้วส่งคืน",-1)])]),_:1})):d("",!0),i(r).currentMemo.actions.copyStores?(n(),m(p,{key:2,size:"small"},{default:e(()=>[...t[19]||(t[19]=[a("ถ่ายสำเนาเก็บไว้ ",-1)])]),_:1})):d("",!0),i(r).currentMemo.actions.returnCopies?(n(),m(p,{key:3,size:"small"},{default:e(()=>[...t[20]||(t[20]=[a("ส่งสำเนาคืน ",-1)])]),_:1})):d("",!0),i(r).currentMemo.actions.forApproval?(n(),m(p,{key:4,size:"small"},{default:e(()=>[...t[21]||(t[21]=[a("เพื่ออนุมัติ ",-1)])]),_:1})):d("",!0),i(r).currentMemo.actions.toConsider?(n(),m(p,{key:5,size:"small"},{default:e(()=>[...t[22]||(t[22]=[a("เพื่อพิจารณา ",-1)])]),_:1})):d("",!0),i(r).currentMemo.actions.toKnow?(n(),m(p,{key:6,size:"small"},{default:e(()=>[...t[23]||(t[23]=[a("เพื่อทราบ",-1)])]),_:1})):d("",!0),i(r).currentMemo.actions.other?(n(),m(p,{key:7,size:"small"},{default:e(()=>[a(" อื่นๆ: "+u(i(r).currentMemo.otherAction),1)]),_:1})):d("",!0),T.value?d("",!0):(n(),g("span",ft,"-"))])]),s(C,{class:"my-4"}),s(b,null,{default:e(()=>[s(f,{cols:"12"},{default:e(()=>[o("div",ct,[t[25]||(t[25]=o("div",{class:"text-caption text-medium-emphasis"},"เรื่อง",-1)),o("div",vt,u(i(r).currentMemo.subject||"-"),1)])]),_:1}),s(f,{cols:"12"},{default:e(()=>[o("div",xt,[t[26]||(t[26]=o("div",{class:"text-caption text-medium-emphasis"},"รายละเอียด",-1)),o("div",_t,u(i(r).currentMemo.details||"-"),1)])]),_:1}),s(f,{cols:"12"},{default:e(()=>[o("div",yt,[t[27]||(t[27]=o("div",{class:"text-caption text-medium-emphasis"},"ข้อความ/เนื้อหา",-1)),o("div",bt,u(i(r).currentMemo.message||"-"),1)])]),_:1})]),_:1}),s(C,{class:"my-4"}),o("div",Mt,[s(y,{color:"success",onClick:S},{default:e(()=>[s(M,{start:""},{default:e(()=>[...t[28]||(t[28]=[a(" mdi-file-pdf-box ",-1)])]),_:1}),t[29]||(t[29]=a(" Export PDF ",-1))]),_:1}),s(y,{color:"primary",variant:"outlined",onClick:E},{default:e(()=>[s(M,{start:""},{default:e(()=>[...t[30]||(t[30]=[a(" mdi-pencil ",-1)])]),_:1}),t[31]||(t[31]=a(" แก้ไข ",-1))]),_:1})])]),_:1})]),_:1})]),_:1})]),_:1})):(n(),m(b,{key:1},{default:e(()=>[s(f,{cols:"12"},{default:e(()=>[s(h,{memo:i(r).currentMemo,"is-saved":!0,onSave:F,onExportPdf:S,onReset:B},null,8,["memo"])]),_:1})]),_:1}))]),_:1}),s(Q,{ref_key:"pdfExportRef",ref:z,memo:i(r).currentMemo},null,8,["memo"]),s(G,{modelValue:v.value.show,"onUpdate:modelValue":t[2]||(t[2]=_=>v.value.show=_),color:v.value.color,timeout:3e3},{actions:e(()=>[s(y,{variant:"text",onClick:t[1]||(t[1]=_=>v.value.show=!1)},{default:e(()=>[...t[32]||(t[32]=[a(" ปิด ",-1)])]),_:1})]),default:e(()=>[a(u(v.value.message)+" ",1)]),_:1},8,["modelValue","color"])])}}});export{Ut as default};
